{
    "title": "Transfer  error procedures",
    "linkTitle": "Transfer error procedures",
    "weight": "210"
}You can define parameters so that the Transfer CFT performs certain
terminating procedures if a transfer error occurs. A transfer error is
defined as a problem leading to the Transfer CFT discontinuing the transfer.
If this occurs, Transfer CFT can initiate one of the two procedures:

- [End-of-transfer
    procedure](#End-of-transfer)
- [Backup
    procedure](#Backup_procedures)

These procedures are define by a command parameter,
described in the following section.

<span id="Defining_procedure_names"></span>

### Defining procedure names

The names of these procedures are defined by the value of the EXEC\*
parameters of the [CFTPARM](),
[CFTSEND/SEND](../../cft_configuration_concepts_start_here/default_send_template_concepts)
or [CFTRECV/RECV](../../cft_configuration_concepts_start_here/default_receive_template_concepts)
commands.

Depending on the transfer direction, send or receive, these parameters
define the names of the procedures executed:

- At the end of a
    file transfer
- At the end of a
    message transfer
- On receiving an
    acknowledgement following the sending of a file
- On receiving an
    acknowledgement following the sending of a message
- Following a transfer
    error

You can use [symbolic
variables](../../../c_intro_userinterfaces/command_summary/symbolic_variables) to define these parameters.

The value references a physical file name or a logical file name, for
the operating systems supporting this feature. This name corresponds to
the name of the file containing the procedure JCL to be executed.

<span id="Executing_the_procedure"></span>

### Executing the procedure

On completion of a transfer, on receiving a send acknowledgement or
following an incident, the Transfer CFT checks to see if there is an EXEC\*
parameter provided to deal with this situation.

If a procedure is defined, Transfer CFT checks if there is a procedure
file having the name defined by the value of this parameter, copies the
JCL (command sequence) contained in this file into a reserved file, replacing
the transfer context data for the symbolic variables present, and then
submits this temporary file for execution.

According to the system, the name of the temporary file is generated
by the Transfer CFT. Refer to the Transfer CFT *Operations Guide*
that corresponds to your OS.

**Temporary file name generated by the Transfer
CFT**

![Transfer CFT substitutes the symbolic variable in the filename](/Images/TransferCFT/temp_file_name.png)

<span id="Backup_procedures"></span>

### Backup procedures

Transfer CFT can initiate a backup procedure in case of a transfer error.

A transfer error is defined as a problem leading to the Transfer CFT discontinuing
the transfer. The transfer may have begun or not. This applies to the
following types of transfers:

- Whose activation
    time slot is expired
- Which is interrupted,
    in the ****H**** state (except for particular
    cases, see the Transfer CFT *[Codes,
    Diagnostics and Messages](../../../troubleshoot_intro/messages_and_error_codes_start_here)*) or ****K****
    state
- Which is refused
    by the partner, for example, if the password is incorrect

Under these circumstances, Transfer CFT triggers the execution
of a procedure described, according to the transfer direction, in the
file, the name of which is defined by the EXECSE send or EXECRE receive
parameter of the CFTPARM object.

When a generic transfer request is made for a RECV with no implicit
SEND, an error procedure is systematically initiated if the sender has
nothing to send. In ODETTE protocol, the procedure is also initiated when
the partner has nothing more to send after having concatenated several
receptions.

The use of symbolic variables, in the file name and in the body of the
procedure, provides all the facilities for restoring the transfer context.

The symbolic variables which can be used to define the procedure name,
and in the body of the procedure thereby named, are indicated in the *Symbolic
variables* paragraph.

<span id="End-of-transfer"></span>

### End-of-transfer procedures

Transfer CFT provides the possibility of executing end of transfer procedures
having names defined in the corresponding EXEC\* parameters of the CFTPARM
object or in the EXEC parameters of the CFTSEND/SEND or CFTRECV/RECV commands.

You can use symbolic variables, in the file name and in the body of
the procedure, to provide all the facilities for restoring the transfer
context.

The *[Symbolic
variables](../../../c_intro_userinterfaces/command_summary/symbolic_variables)* paragraph indicates the symbolic variables which can
be used to define the procedure name, and the symbolic variables which
can be used in the body of the procedure.

When the transfer is in the ****T****
state, you can submit these procedures, or other external procedures,
using the SUBMIT command.

This command applies to transfers to a single partner and also to transfers
via a broadcasting list. In the latter case, you can use the CFTDEST object
to define the end of transfer submit mode. Submit either:

- A single end of
    transfer procedure when all transfers have been completed for the list
    of partners, or
- An end of transfer
    procedure for each terminated transfer

You can use this command to restore the transfer context and consequently
assign the values corresponding to this transfer to the symbolic variables.
You may use it to re-activate an end of transfer procedure
that had not taken place correctly.
